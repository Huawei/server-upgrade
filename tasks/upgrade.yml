---
# tasks file for Upgrade target server driver version

- import_tasks: add-repo.yml

# - name: "Check required variables for upgrade driver task"
#   fail: msg="Variable '{{ item }}' is not defined"
#   when: item not in vars
#   with_items:
#     - driver
#     - version

- include_tasks: upgrade-list.yml

- name: "Upgrade Huawei Server Driver"
  shell: /bin/sh {{ hsu_root }}/bin/hsu upgrade 
   {{ drivers | default([]) | plain}}
   {{ inbandFW | default([]) | plain}}
   {{ outbandFW | default([]) | plain}}
   --format=json
  register: result
  changed_when: False

- name: "Upgrade Huawei Server Driver Result"
  debug: msg="{{ result.stdout | hsu }}"
  